{"version":3,"sources":["assets\\Scipts\\Game.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsC,4BAAY;IAAlD;QAAA,qEAkIC;QA/HG,oBAAc,GAAc,IAAI,CAAC;QAEjC,qBAAe,GAAa,IAAI,CAAC;QAGjC,yBAAmB,GAAW,CAAC,CAAC;QAEhC,yBAAmB,GAAY,CAAC,CAAC;QAEjC,UAAI,GAAY,IAAI,CAAC;QAErB,WAAK,GAAW,IAAI,CAAC;QAQrB,iBAAW,GAAU,CAAC,CAAC;QAIvB,WAAK,GAAY,IAAI,CAAC;;IAwG1B,CAAC;IAtGG,oCAAiB,GAAjB;QACI,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC;QACvB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,GAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;IAC/D,CAAC;IAED,4BAAS,GAAT;QACI,IAAI,CAAC,WAAW,IAAI,CAAC,CAAC;QACtB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,GAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;IAC/D,CAAC;IAED,wBAAwB;IAExB,yBAAM,GAAN;QACI,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QAExB,IAAI,CAAC,KAAK,GAAE,CAAC,CAAC;QAEd,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;QAE1B,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAEjC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;IACzB,CAAC;IAED,wCAAqB,GAArB;QACI,IAAI,cAAc,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAE3D,cAAc,CAAC,YAAY,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC;QACvD,cAAc,CAAC,KAAK,GAAG,WAAW,CAAC;QACnC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,yBAAyB,EAAE,CAAC,CAAC;QAC5D,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAEpC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;IAC3B,CAAC;IAED,4CAAyB,GAAzB;QACI,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,IAAI,GAAI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAC,CAAC,CAAC;QAC9B,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;QACpC,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAC,GAAG,CAAC,CAAC;IAE5B,CAAC;IAED,uCAAoB,GAApB;QACI,IAAI,aAAa,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACxD,aAAa,CAAC,YAAY,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC;QACtD,aAAa,CAAC,KAAK,GAAG,UAAU,CAAC;QACjC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,wBAAwB,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAElC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,mBAAmB,GAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACvH,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;IAE3B,CAAC;IAED,2CAAwB,GAAxB;QACI,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAE,GAAG,CAAC,GAAI,EAAE,CAAC;QACnC,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAE,GAAG,CAAC,GAAI,GAAG,CAAC;QACpC,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAC,KAAK,CAAC,CAAC;IAE9B,CAAC;IAED,qCAAkB,GAAlB;QACI,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAClC,CAAC;IAED,wBAAK,GAAL;IAEA,CAAC;IAED,2BAAQ,GAAR;QACI,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAC3B,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;QAC5B,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAED,yBAAM,GAAN,UAAO,EAAE;QACL,IAAG,IAAI,CAAC,aAAa,GAAC,IAAI,CAAC,gBAAgB,EAAC;YACxC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAO;SACV;QACD,IAAI,IAAI,CAAC,iBAAiB,EAAC;YACvB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAO;SACV;QACD,IAAI,IAAI,CAAC,cAAc,IAAI,GAAG,EAAC;YAC3B,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAChC;QACD,IAAG,IAAI,CAAC,KAAK,IAAI,CAAC,EAAC;YACf,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;SAClB;QACD,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;QACjB,IAAI,CAAC,aAAa,IAAI,EAAE,CAAC;QACzB,IAAI,CAAC,cAAc,IAAI,EAAE,CAAC;IAC9B,CAAC;IA9HD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;oDACa;IAEjC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;qDACa;IAGjC;QADC,QAAQ;yDACuB;IAEhC;QADC,QAAQ;yDACwB;IAEjC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0CACG;IAErB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;2CACG;IAGrB;QADC,QAAQ;sDACgB;IASzB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;2CACG;IA1BL,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAkI5B;IAAD,eAAC;CAlID,AAkIC,CAlIqC,EAAE,CAAC,SAAS,GAkIjD;kBAlIoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    EstrellaPrefab:cc.Prefab  = null;\r\n    @property(cc.Prefab)\r\n    AsteroidePrefab:cc.Prefab = null;\r\n\r\n    @property\r\n    maxDuracionEstrella:number  = 0;\r\n    @property\r\n    minDuracionEstrella: number  = 0;\r\n    @property(cc.Node)\r\n    Nave:cc.Node  = null;\r\n    @property(cc.Node)\r\n    Nave2:cc.Node = null;\r\n\r\n    @property\r\n    DuracionEstrella: number;\r\n    \r\n    timerEstrella: number;\r\n    timerAsteroide: number;\r\n    ColisionAsteroide: boolean;\r\n    playerScore:number = 0;\r\n    timer: number;\r\n\r\n    @property(cc.Label)\r\n    score:cc.Label = null;\r\n\r\n    gainScoreEstrella(){\r\n        this.playerScore += 10;\r\n        this.score.string = 'Score: '+ this.playerScore.toString();\r\n    }\r\n\r\n    gainScore(){\r\n        this.playerScore += 1;\r\n        this.score.string = 'Score: '+ this.playerScore.toString();\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.timerEstrella = 0;\r\n        this.timerAsteroide = 0;\r\n\r\n        this.timer= 0;\r\n\r\n        this.DuracionEstrella = 0;\r\n\r\n        this.DibujarNuevaEstrella();\r\n        this.DibujarNuevoAsteroide();\r\n\r\n        cc.director.preloadScene('Game');\r\n\r\n        this.playerScore = 0;\r\n    }\r\n\r\n    DibujarNuevoAsteroide(){\r\n        var nuevoAsteroide = cc.instantiate(this.AsteroidePrefab);\r\n\r\n       nuevoAsteroide.getComponent(cc.PolygonCollider).points; \r\n       nuevoAsteroide.group = 'Asteroide';\r\n       nuevoAsteroide.setPosition(this.getNuevaPosicionAsteroide());\r\n        this.node.addChild(nuevoAsteroide);\r\n\r\n       this.timerAsteroide = 0;\r\n    }\r\n\r\n    getNuevaPosicionAsteroide(){\r\n        var randX = 0;\r\n        var maxX  = this.node.width/2;\r\n        randX = (Math.random() * -400) - 50;\r\n        return cc.v2(randX,640);\r\n\r\n    }\r\n\r\n    DibujarNuevaEstrella(){\r\n        var nuevaEstrella = cc.instantiate(this.EstrellaPrefab);\r\n        nuevaEstrella.getComponent(cc.PolygonCollider).points;\r\n        nuevaEstrella.group = 'Estrella';\r\n        nuevaEstrella.setPosition(this.getNuevaPosicionEstrella());\r\n        this.node.addChild(nuevaEstrella);\r\n\r\n        this.DuracionEstrella = this.minDuracionEstrella + Math.random() * (this.maxDuracionEstrella-this.minDuracionEstrella);\r\n        this.timerEstrella = 0;\r\n        \r\n    }\r\n\r\n    getNuevaPosicionEstrella(){\r\n        var randX = 0;\r\n        var randY = 0;\r\n        randX = (Math.random()* 460)  + 10;\r\n        randY = (Math.random()* 600)  - 300;\r\n        return cc.v2(randX,randY);\r\n\r\n    }\r\n\r\n    CollisionAsteroide(){\r\n        this.ColisionAsteroide = true;\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    gameOver(){\r\n        this.Nave.stopAllActions();\r\n        this.Nave2.stopAllActions();\r\n        cc.director.loadScene('Menu');\r\n    }\r\n\r\n    update(dt){\r\n        if(this.timerEstrella>this.DuracionEstrella){\r\n            this.gameOver();\r\n            return;\r\n        }\r\n        if (this.ColisionAsteroide){\r\n            this.gameOver();\r\n            return;\r\n        }\r\n        if (this.timerAsteroide >= 0.7){\r\n            this.DibujarNuevoAsteroide();\r\n        }\r\n        if(this.timer >= 1){\r\n            this.gainScore();\r\n            this.timer = 0;\r\n        }\r\n        this.timer += dt;\r\n        this.timerEstrella += dt;\r\n        this.timerAsteroide += dt;\r\n    }  \r\n}\r\n"]}